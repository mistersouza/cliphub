"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[382],{382:(e,t,l)=>{l.r(t),l.d(t,{default:()=>p});var s=l(43),a=l(216),n=l(184),r=l(720),o=l(670),i=l(55),c=l(194),d=l(579);const p=()=>{const[e,t]=(0,s.useState)(!1),[l,p]=(0,s.useState)(!1),[x,m]=(0,s.useState)({caption:"",topic:"",clip:""}),{caption:u,topic:f,clip:h}=x,g=(0,s.useRef)(null),j=(0,a.Zp)(),b=e=>{let{target:t}=e;m((e=>({...e,[t.name]:t.value})))};return(0,d.jsx)("div",{className:"flex justify-center h-full w-full absolute top-[60] left-0 pt-10 lg:pt-20 bg-gray-200 mb-10",children:(0,d.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t=new FormData;t.append("caption",u),t.append("topic",f),t.append("clip",g.current.files[0]);try{await i.G.post("/clips/",t),p(!0)}catch(a){var l,s;if(401!==(null===(l=a.response)||void 0===l?void 0:l.status))console.error("Error uploading clip",(null===(s=a.response)||void 0===s?void 0:s.data)||a)}finally{p(!1),j("/")}},className:"bg-white rounded-lg xl:h-[80vh] flex gap-6 flex-wrap justify-center items-center p-14 pt-6",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"flex flex-col items-center gap-1 py-5",children:[(0,d.jsx)("p",{className:"text-2xl font-bold",children:"Upload a clip"}),(0,d.jsx)("p",{className:"text-md text-gray-500",children:"Post a clip to your account"})]}),(0,d.jsx)("div",{className:"flex flex-col justify-center items-center border-dashed border-4 border-gray-200 rounded-xl outline-none w-[260px] h-[458px] p-3 cursor-pointer hover:border-gray-800 hover:bg-gray-100",children:e?(0,d.jsx)(o.A,{size:"md"}):(0,d.jsxs)("div",{className:"w-full h-full flex items-center justify-center relative",children:[h?(0,d.jsxs)("video",{className:"flex h-full w-full object-contain bg-black rounded-md",controls:!0,children:[(0,d.jsx)("source",{src:h,type:"video/mp4"}),"Your browser does not support video tags :/"]}):(0,d.jsx)("div",{className:"flex flex-col items-center justify-center gap-3",children:(0,d.jsx)("label",{htmlFor:"dropzone",children:(0,d.jsxs)("div",{className:"flex flex-col items-center justify-center gap-3",children:[(0,d.jsx)(n.BzO,{className:"text-gray-500 text-6xl"}),(0,d.jsxs)("p",{className:"flex flex-col text-sm text-gray-500",children:[(0,d.jsx)("span",{className:"font-semibold",children:"Click to upload"}),(0,d.jsx)("span",{children:"or drag and drop"})]}),(0,d.jsx)("p",{className:"text-xs text-gray-500 text-center",children:"MP4 only (MAX. 800x400px)"})]})})}),(0,d.jsx)("input",{className:"hidden",type:"file",id:"dropzone",name:"clip",onChange:e=>{t(!0),e.target.files.length&&(URL.revokeObjectURL(h),m((t=>({...t,clip:URL.createObjectURL(e.target.files[0])})))),t(!1)},ref:g})]})})]}),(0,d.jsxs)("div",{className:"flex flex-col gap-3 pb-10",children:[(0,d.jsx)("label",{className:"text-md font-medium",children:"Caption"}),(0,d.jsx)("input",{type:"text",name:"caption",value:u,onChange:b,className:"rounded lg:after:w-650 outline-none text-md border-2 border-gray-200 p-2"}),(0,d.jsx)("label",{className:"text-md font-medium",children:"Choose a topic"}),(0,d.jsxs)("div",{className:"relative rounded lg:w-650 border-2 border-gray-200",children:[(0,d.jsx)("select",{name:"topic",value:f,onChange:b,className:"outline-none appearance-none w-full text-md capitalize lg:p-3 p-2 cursor-pointer",children:c.vp.map((e=>(0,d.jsx)("option",{className:"outline-none capitalize bg-white text-gray-700 text-md p-2 hover:bg-gray-100",value:e.name,children:e.name},e.name)))}),(0,d.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none",children:(0,d.jsx)(r.gpS,{className:"w-6 h-6 text-gray-500"})})]}),(0,d.jsxs)("div",{className:"flex gap-6 mt-10",children:[(0,d.jsx)("button",{className:"border-gray-300 border-2 text-md font-medium p-2 rounded w-28 lg:w-44 outline-none",onClick:()=>{m((e=>({...e,clip:""})))},type:"button",children:"Discard"}),(0,d.jsx)("button",{className:`bg-${h?"gray-800":"gray-500"} text-white text-md\n                font-medium p-2 rounded w-28 lg:w-44 outline-none`,type:"submit",children:l?"Posting...":"Post"})]})]})]})})}}}]);
//# sourceMappingURL=382.b3f5a77f.chunk.js.map