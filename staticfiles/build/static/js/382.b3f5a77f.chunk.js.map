{"version":3,"file":"static/js/382.b3f5a77f.chunk.js","mappings":"0MAcA,MAqLA,EArLmBA,KACjB,MAAOC,EAAWC,IAAgBC,EAAAA,EAAAA,WAAS,IACpCC,EAAYC,IAAiBF,EAAAA,EAAAA,WAAS,IACtCG,EAAUC,IAAeJ,EAAAA,EAAAA,UAAS,CACvCK,QAAS,GACTC,MAAO,GACPC,KAAM,MAEF,QAAEF,EAAO,MAAEC,EAAK,KAAEC,GAASJ,EAC3BK,GAAUC,EAAAA,EAAAA,QAAO,MACjBC,GAAWC,EAAAA,EAAAA,MAEXC,EAAoBC,IAAiB,IAAhB,OAAEC,GAAQD,EACnCT,GAAaW,IAAS,IACjBA,EACH,CAACD,EAAOE,MAAOF,EAAOG,SACrB,EA0CL,OACEC,EAAAA,EAAAA,KAAA,OACEC,UAAU,8FAC8BC,UAExCC,EAAAA,EAAAA,MAAA,QACEC,SA1BmBC,UACvBC,EAAMC,iBACN,MAAMC,EAAW,IAAIC,SACrBD,EAASE,OAAO,UAAWvB,GAC3BqB,EAASE,OAAO,QAAStB,GACzBoB,EAASE,OAAO,OAAQpB,EAAQqB,QAAQC,MAAM,IAE9C,UACQC,EAAAA,EAAaC,KAAK,UAAWN,GACnCxB,GAAc,EAChB,CAAE,MAAO+B,GAAQ,IAADC,EACsBC,EAApC,GAA+B,OAAb,QAAdD,EAAAD,EAAMG,gBAAQ,IAAAF,OAAA,EAAdA,EAAgBG,QAClBC,QAAQL,MAAM,wBAAsC,QAAdE,EAAAF,EAAMG,gBAAQ,IAAAD,OAAA,EAAdA,EAAgBI,OAAQN,EAElE,CAAC,QACC/B,GAAc,GACdQ,EAAS,IACX,GAUIS,UAAU,6FACwCC,SAAA,EAElDC,EAAAA,EAAAA,MAAA,OAAAD,SAAA,EACEC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,wCAAuCC,SAAA,EACpDF,EAAAA,EAAAA,KAAA,KAAGC,UAAU,qBAAoBC,SAAC,mBAClCF,EAAAA,EAAAA,KAAA,KAAGC,UAAU,wBAAuBC,SAAC,oCAEvCF,EAAAA,EAAAA,KAAA,OACEC,UAAU,0LAEiDC,SAE1DtB,GACCoB,EAAAA,EAAAA,KAACsB,EAAAA,EAAW,CAACC,KAAM,QAEnBpB,EAAAA,EAAAA,MAAA,OAAKF,UAAU,0DAAyDC,SAAA,CACrEb,GACCc,EAAAA,EAAAA,MAAA,SACEF,UAAU,wDACVuB,UAAQ,EAAAtB,SAAA,EAERF,EAAAA,EAAAA,KAAA,UAAQyB,IAAKpC,EAAMqC,KAAK,cAAc,kDAIxC1B,EAAAA,EAAAA,KAAA,OAAKC,UAAU,kDAAiDC,UAC9DF,EAAAA,EAAAA,KAAA,SAAO2B,QAAQ,WAAUzB,UACvBC,EAAAA,EAAAA,MAAA,OACEF,UAAU,kDACJC,SAAA,EAENF,EAAAA,EAAAA,KAAC4B,EAAAA,IAAgB,CAAC3B,UAAU,4BAC5BE,EAAAA,EAAAA,MAAA,KAAGF,UAAU,sCAAqCC,SAAA,EAChDF,EAAAA,EAAAA,KAAA,QAAMC,UAAU,gBAAeC,SAAC,qBAChCF,EAAAA,EAAAA,KAAA,QAAAE,SAAM,yBAERF,EAAAA,EAAAA,KAAA,KAAGC,UAAU,oCAAmCC,SAAC,sCAOzDF,EAAAA,EAAAA,KAAA,SACEC,UAAU,SACVyB,KAAK,OACLG,GAAG,WACH/B,KAAK,OACLgC,SA/FUxB,IACxBzB,GAAa,GACTyB,EAAMV,OAAOgB,MAAMmB,SACrBC,IAAIC,gBAAgB5C,GACpBH,GAAaW,IAAS,IACjBA,EACHR,KAAM2C,IAAIE,gBAAgB5B,EAAMV,OAAOgB,MAAM,SAGjD/B,GAAa,EAAM,EAuFLsD,IAAK7C,aAMfa,EAAAA,EAAAA,MAAA,OAAKF,UAAU,4BAA2BC,SAAA,EACxCF,EAAAA,EAAAA,KAAA,SAAOC,UAAU,sBAAqBC,SAAC,aACvCF,EAAAA,EAAAA,KAAA,SACE0B,KAAK,OACL5B,KAAK,UACLC,MAAOZ,EACP2C,SAAUpC,EACVO,UAAU,8EAGZD,EAAAA,EAAAA,KAAA,SAAOC,UAAU,sBAAqBC,SAAC,oBACvCC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,qDAAoDC,SAAA,EACjEF,EAAAA,EAAAA,KAAA,UACEF,KAAK,QACLC,MAAOX,EACP0C,SAAUpC,EACVO,UAAU,mFACOC,SAEhBkC,EAAAA,GAAOC,KAAKjD,IACXY,EAAAA,EAAAA,KAAA,UACEC,UAAU,+EAGVF,MAAOX,EAAMU,KAAKI,SAEjBd,EAAMU,MAHFV,EAAMU,WAOjBE,EAAAA,EAAAA,KAAA,OACEC,UAAU,wEACUC,UAEpBF,EAAAA,EAAAA,KAACsC,EAAAA,IAA0B,CAACrC,UAAU,gCAG1CE,EAAAA,EAAAA,MAAA,OAAKF,UAAU,mBAAkBC,SAAA,EAC/BF,EAAAA,EAAAA,KAAA,UACEC,UAAU,qFAEVsC,QAnIeC,KACzBtD,GAAaW,IAAS,IACjBA,EACHR,KAAM,MACL,EAgIOqC,KAAK,SAAQxB,SACd,aAGDF,EAAAA,EAAAA,KAAA,UACEC,UAAW,MAAMZ,EAAO,WAAa,mGAErCqC,KAAK,SAAQxB,SAEZnB,EAAa,aAAe,mBAKjC,C","sources":["components/clips/ClipUpload.js"],"sourcesContent":["// React imports\nimport { useState, useRef } from 'react';\n// Depedacies imports\nimport { useNavigate } from 'react-router-dom';\n// Icons imports\nimport { FaCloudUploadAlt } from 'react-icons/fa';\nimport { MdOutlineKeyboardArrowDown } from 'react-icons/md';\n// Components imports\nimport AsyncLoader from '../AsyncLoader';\n// Helpers\nimport { axiosRequest } from '../../api/axiosDefaults';\n// Misc imports\nimport { topics } from '../../utils/constants';\n\nconst ClipUpload = () => {\n  const [isLoading, setIsLoading] = useState(false);\n  const [savingClip, setSavingClip] = useState(false);\n  const [clipData, setClipData] = useState({\n    caption: '',\n    topic: '',\n    clip: '',\n  });\n  const { caption, topic, clip } = clipData;\n  const clipRef = useRef(null);\n  const navigate = useNavigate();\n\n  const handleInputChange = ({ target }) => {\n    setClipData((prevState) => ({\n      ...prevState,\n      [target.name]: target.value,\n    }));\n  };\n\n  const handleClipChange = (event) => {\n    setIsLoading(true);\n    if (event.target.files.length) {\n      URL.revokeObjectURL(clip);\n      setClipData((prevState) => ({\n        ...prevState,\n        clip: URL.createObjectURL(event.target.files[0]),\n      }));\n    }\n    setIsLoading(false);\n  };\n\n  const handleDiscardClick = () => {\n    setClipData((prevState) => ({\n      ...prevState,\n      clip: '',\n    }));\n  };\n\n  const handleClipSubmit = async (event) => {\n    event.preventDefault();\n    const formData = new FormData();\n    formData.append('caption', caption);\n    formData.append('topic', topic);\n    formData.append('clip', clipRef.current.files[0]);\n\n    try {\n      await axiosRequest.post('/clips/', formData);\n      setSavingClip(true);\n    } catch (error) {\n      if (error.response?.status !== 401) {\n        console.error('Error uploading clip', error.response?.data || error);\n      }\n    } finally {\n      setSavingClip(false);\n      navigate('/');\n    }\n  };\n\n  return (\n    <div\n      className=\"flex justify-center h-full w-full absolute top-[60]\n      left-0 pt-10 lg:pt-20 bg-gray-200 mb-10\"\n    >\n      <form\n        onSubmit={handleClipSubmit}\n        className=\"bg-white rounded-lg xl:h-[80vh] flex gap-6\n          flex-wrap justify-center items-center p-14 pt-6\"\n      >\n        <div>\n          <div className=\"flex flex-col items-center gap-1 py-5\">\n            <p className=\"text-2xl font-bold\">Upload a clip</p>\n            <p className=\"text-md text-gray-500\">Post a clip to your account</p>\n          </div>\n          <div\n            className=\"flex flex-col justify-center items-center border-dashed\n            border-4 border-gray-200 rounded-xl outline-none w-[260px] h-[458px]\n            p-3 cursor-pointer hover:border-gray-800 hover:bg-gray-100\"\n          >\n            {isLoading ? (\n              <AsyncLoader size={'md'} />\n            ) : (\n              <div className=\"w-full h-full flex items-center justify-center relative\">\n                {clip ? (\n                  <video\n                    className=\"flex h-full w-full object-contain bg-black rounded-md\"\n                    controls\n                  >\n                    <source src={clip} type=\"video/mp4\" />\n                    Your browser does not support video tags :/\n                  </video>\n                ) : (\n                  <div className=\"flex flex-col items-center justify-center gap-3\">\n                    <label htmlFor=\"dropzone\">\n                      <div\n                        className=\"flex flex-col items-center justify-center\n                        gap-3\"\n                      >\n                        <FaCloudUploadAlt className=\"text-gray-500 text-6xl\" />\n                        <p className=\"flex flex-col text-sm text-gray-500\">\n                          <span className=\"font-semibold\">Click to upload</span>\n                          <span>or drag and drop</span>\n                        </p>\n                        <p className=\"text-xs text-gray-500 text-center\">\n                          MP4 only (MAX. 800x400px)\n                        </p>\n                      </div>\n                    </label>\n                  </div>\n                )}\n                <input\n                  className=\"hidden\"\n                  type=\"file\"\n                  id=\"dropzone\"\n                  name=\"clip\"\n                  onChange={handleClipChange}\n                  ref={clipRef}\n                />\n              </div>\n            )}\n          </div>\n        </div>\n        <div className=\"flex flex-col gap-3 pb-10\">\n          <label className=\"text-md font-medium\">Caption</label>\n          <input\n            type=\"text\"\n            name=\"caption\"\n            value={caption}\n            onChange={handleInputChange}\n            className=\"rounded lg:after:w-650 outline-none text-md border-2\n              border-gray-200 p-2\"\n          />\n          <label className=\"text-md font-medium\">Choose a topic</label>\n          <div className=\"relative rounded lg:w-650 border-2 border-gray-200\">\n            <select\n              name=\"topic\"\n              value={topic}\n              onChange={handleInputChange}\n              className=\"outline-none appearance-none w-full text-md capitalize lg:p-3 p-2\n                cursor-pointer\"\n            >\n              {topics.map((topic) => (\n                <option\n                  className=\"outline-none capitalize bg-white text-gray-700 text-md\n                    p-2 hover:bg-gray-100\"\n                  key={topic.name}\n                  value={topic.name}\n                >\n                  {topic.name}\n                </option>\n              ))}\n            </select>\n            <div\n              className=\"absolute inset-y-0 right-0 flex items-center px-2\n              pointer-events-none\"\n            >\n              <MdOutlineKeyboardArrowDown className=\"w-6 h-6 text-gray-500\" />\n            </div>\n          </div>\n          <div className=\"flex gap-6 mt-10\">\n            <button\n              className=\"border-gray-300 border-2 text-md font-medium p-2 rounded\n                w-28 lg:w-44 outline-none\"\n              onClick={handleDiscardClick}\n              type=\"button\"\n            >\n              Discard\n            </button>\n            <button\n              className={`bg-${clip ? 'gray-800' : 'gray-500'} text-white text-md\n                font-medium p-2 rounded w-28 lg:w-44 outline-none`}\n              type=\"submit\"\n            >\n              {savingClip ? 'Posting...' : 'Post'}\n            </button>\n          </div>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default ClipUpload;\n"],"names":["ClipUpload","isLoading","setIsLoading","useState","savingClip","setSavingClip","clipData","setClipData","caption","topic","clip","clipRef","useRef","navigate","useNavigate","handleInputChange","_ref","target","prevState","name","value","_jsx","className","children","_jsxs","onSubmit","async","event","preventDefault","formData","FormData","append","current","files","axiosRequest","post","error","_error$response","_error$response2","response","status","console","data","AsyncLoader","size","controls","src","type","htmlFor","FaCloudUploadAlt","id","onChange","length","URL","revokeObjectURL","createObjectURL","ref","topics","map","MdOutlineKeyboardArrowDown","onClick","handleDiscardClick"],"sourceRoot":""}